(function(e,t){"use strict";function n(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$element=e(t).css({position:"absolute",width:"auto","min-width":"none","max-width":"none",height:"auto","min-height":"none","max-height":"none"}),-1==e.inArray(this.getWrapper().css("position"),["absolute","relative","fixed"])&&this.getWrapper().css("position","relative"),this.getWrapper().css("overflow","hidden"),typeof this.options.init=="function"&&this.options.init.call(this.$element),e(window).resize(e.proxy(this.resize,this)),this.$element.get(0).complete?this.load():this.$element.load(e.proxy(this.load,this))}n.DEFAULTS={posX:"center",posY:"middle",wrapper:t,init:function(){e(this).fadeTo(0,0)},load:function(){e(this).fadeTo(400,1)}},e.extend(n.prototype,{load:function(){this.$element.trigger("load.cover"),this.resize(),typeof this.options.load=="function"&&this.options.load.call(this.$element),this.$element.trigger("loaded.cover")},getWrapper:function(){if(!this.$wrapper)if(typeof this.options.wrapper=="string")this.$wrapper=this.$element.closest(this.options.wrapper);else{this.$wrapper=this.$element.parent();while(this.$wrapper.not("body")&&-1==e.inArray(this.$wrapper.css("position"),["relative","absolute"])&&-1==e.inArray(this.$wrapper.css("display"),["block","inline-block"]))this.$wrapper=this.$wrapper.parent()}return this.$wrapper},getWidth:function(){return this.width||(this.width=this.$element.attr("width")||this.$element.get(0).width||1),this.width},getHeight:function(){return this.height||(this.height=this.$element.attr("height")||this.$element.get(0).height||1),this.height},getRatio:function(){return this.ratio||(this.ratio=this.getWidth()/this.getHeight()),this.ratio},getWrapperRatio:function(){return this.getWrapper().width()/(this.getWrapper().height()||1)},resize:function(){this.$element.trigger("resize.cover");if(this.getWrapperRatio()<this.getRatio()){this.$element.css({width:"auto",height:"100%",top:0});switch(this.options.posX){case"left":this.$element.css({left:0,right:"none"});break;case"right":this.$element.css({left:"none",right:0});break;default:this.$element.css({left:-((this.$element.width()-this.$wrapper.width())/2),right:"none"})}}else{this.$element.css({width:"100%",height:"auto",left:0});switch(this.options.posY){case"top":this.$element.css({top:0,bottom:"none"});break;case"bottom":this.$element.css({top:"none",bottom:0});break;default:this.$element.css({top:-((this.$element.height()-this.$wrapper.height())/2),bottom:"none"})}}this.$element.trigger("resized.cover")}});var r=e.fn.cover;e.fn.cover=function(t){return this.each(function(){var r=e(this),i=r.data("wxr.cover"),s=typeof t=="object"&&t;i||r.data("wxr.cover",i=new n(this,s))})},e.fn.cover.Constructor=n,e.fn.cover.noConflict=function(){return e.fn.cover=r,this},e(window).on("load",function(){e('img[data-size="cover"]').each(function(){var t=e(this);t.cover(t.data())})})})(window.jQuery);