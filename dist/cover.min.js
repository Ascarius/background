!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e,i){return this.$element=t(e),this.$element.data(o)?this.$element.data(o):(this.$element.data(o,this),this.options=t.extend({},this.DEFAULTS,i||{},this.$element.data()),this.$wrapper=this._findWrapper(),this.width=null,this.height=null,this.ratio=null,this.onResize=null,this.onRemove=null,void this._init())}var i="cover",o="wxr.cover",n=t(window),s=t.fn[i];return e.prototype.DEFAULTS={x:"center",y:"center",attachment:"scroll",wrapper:null,css:!0,onInit:function(){console.log("onInit"),t(this).fadeTo(0,0)},onLoad:function(){console.log("onLoad"),t(this).fadeTo(400,1)}},e.prototype._init=function(){var e=this.options,o=this.$element,n=this.$wrapper;return e.css&&this.cssSupport()?(n.css({"background-image":"url("+o.attr("src")+")","background-position":e.x+" "+e.y,"background-attachment":e.attachment}),void o.hide()):(this._initWrapper(),this._initElement(),this._bind(),"function"==typeof this.options.onInit&&this.options.onInit.call(o),o.trigger("initialized."+i),void(o.get(0).complete?this.loaded():o.one("load",t.proxy(this.loaded,this))))},e.prototype._initWrapper=function(){var e=this.options,i=this.$wrapper;"scroll"!==e.attachment||i.is("body")||(-1===t.inArray(i.css("position"),["absolute","relative","fixed"])&&i.css("position","relative"),i.css("overflow","hidden"))},e.prototype._initElement=function(){this.$element.css({position:"absolute",width:"auto","min-width":"0","max-width":"none",height:"auto","min-height":"0","max-height":"none"})},e.prototype._bind=function(){this.onResize=t.proxy(this.resize,this),this.onRemove=t.proxy(this.destroy,this),n.on("resize",this.onResize),n.on("orientationchange",this.onResize),this.$element.one("remove",this.onRemove)},e.prototype._unbind=function(){n.off("resize",this.onResize),n.off("orientationchange",this.onResize),this.$element.off("remove",this.onRemove)},e.prototype.cssSupport=function(){return t("html").hasClass("bgsizecover")||this.$wrapper.css("background-size","cover")&&"cover"===this.$wrapper.css("background-size")},e.prototype.destroy=function(){this._unbind(),this.$element.removeData(o)},e.prototype.loaded=function(){this.resize(),"function"==typeof this.options.onLoad&&this.options.onLoad.call(this.$element),this.$element.trigger("loaded."+i)},e.prototype._findWrapper=function(){var e,i=this.options,o=this.$element;if("string"==typeof i.wrapper)e=o.closest(i.wrapper);else for(e=o.parent();!e.is("body")&&-1===t.inArray(e.css("position"),["relative","absolute"])&&-1===t.inArray(e.css("display"),["block","inline-block"]);)e=e.parent();return e},e.prototype.getOriginalWidth=function(){return this.width||(this.width=this.$element.attr("width")||this.$element.get(0).width||1),this.width},e.prototype.getOriginalHeight=function(){return this.height||(this.height=this.$element.attr("height")||this.$element.get(0).height||1),this.height},e.prototype.getOriginalRatio=function(){return this.ratio||(this.ratio=this.getOriginalWidth()/this.getOriginalHeight()),this.ratio},e.prototype.getWrapperWidth=function(){var t="fixed"===this.options.attachment?n:this.$wrapper;return t.width()},e.prototype.getWrapperHeight=function(){var t="fixed"===this.options.attachment?n:this.$wrapper;return t.height()},e.prototype.getWrapperRatio=function(){return this.getWrapperWidth()/(this.getWrapperHeight()||1)},e.prototype.resize=function(){var t=(this.options,this.$element);this.getWrapperRatio()<this.getOriginalRatio()?this._resizeNarrower():this._resizeWider(),t.trigger("resized."+i)},e.prototype._resizeNarrower=function(){var t=this.options,e=this.$element;switch(e.css({width:"auto",height:"100%",top:0}),t.x){case"left":e.css({left:0,right:"none"});break;case"right":e.css({left:"none",right:0});break;default:e.css({left:-((e.width()-this.getWrapperWidth())/2),right:"none"})}},e.prototype._resizeWider=function(){var t=this.options,e=this.$element;switch(e.css({width:"100%",height:"auto",left:0}),t.y){case"top":e.css({top:0,bottom:"none"});break;case"bottom":e.css({top:"none",bottom:0});break;default:e.css({top:-((e.height()-this.getWrapperHeight())/2),bottom:"none"})}},t.fn[i]=function(i){return this.each(function(){var n=t(this),s=n.data(o),r="object"==typeof i?i:{};s||(s=new e(this,r)),"string"==typeof i&&("resize"===i?s.resize():"destroy"===i&&s.destroy())})},t.fn.cover.Constructor=e,t.fn.cover.noConflict=function(){return t.fn.cover=s,this},e});
//# sourceMappingURL=cover.min.js.map