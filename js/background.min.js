(function(e,t,n){"use strict";var r=function(n,r){this.$element=e(n).hide().css({position:"absolute",width:"auto","min-width":"none","max-width":"none",height:"auto","min-height":"none","max-height":"none"}),this.$wrapper=this.getWrapper(),-1==e.inArray(this.$wrapper.css("position"),["absolute","relative","fixed"])&&this.$wrapper.css("position","relative"),this.$wrapper.css("overflow","hidden"),this.options=r,e(t).resize(e.proxy(this.resize,this)),this.$element.get(0).complete?this.onLoad():this.$element.load(e.proxy(this.onLoad,this))};r.prototype={onLoad:function(){this.resize(),typeof this.options.onLoad=="function"&&this.options.onLoad(this.$element)},getWrapper:function(){if(!this.$wrapper){this.$wrapper=this.$element.parent();while(this.$wrapper.not("body")&&-1==e.inArray(this.$wrapper.css("display"),["block","inline-block"]))this.$wrapper=this.$wrapper.parent()}return this.$wrapper},getWidth:function(){return this.width||(this.width=this.$element.attr("width"))||(this.width=this.get(0).width||1),this.width},getHeight:function(){return this.height||(this.height=this.$element.attr("height"))||(this.height=this.get(0).height||1),this.height},getRatio:function(){return this.ratio||(this.ratio=this.getWidth()/this.getHeight()),this.ratio},getWrapperRatio:function(){return this.getWrapper().width()/(this.getWrapper().height()||1)},resize:function(){if(this.getWrapperRatio()<this.getRatio()){this.$element.css({width:"auto",height:"100%",top:0});switch(this.options.posX){case"left":this.$element.css({left:0,right:"none"});break;case"right":this.$element.css({left:"none",right:0});break;default:this.$element.css({left:-((this.$element.width()-this.$wrapper.width())/2),right:"none"})}}else{this.$element.css({width:"100%",height:"auto",left:0});switch(this.options.posY){case"top":this.$element.css({top:0,bottom:"none"});break;case"bottom":this.$element.css({top:"none",bottom:0});break;default:this.$element.css({top:-((this.$element.height()-this.$wrapper.height())/2),bottom:"none"})}}}};var i=e.fn.background;e.fn.background=function(t){return this.each(function(){var n=e(this),i=n.data("background"),s=e.extend({},e.fn.background.defaults,n.data(),typeof t=="object"&&t);i||n.data("background",i=new r(this,s)),typeof t=="string"&&i[t]()})},e.fn.background.defaults={posX:"center",posY:"middle",onLoad:function(e){e.fadeIn()}},e.fn.background.Constructor=r,e.fn.background.noConflict=function(){return e.fn.background=i,this},e(t).on("load",function(){e('[data-background="background"]').each(function(){var t=e(this);t.background(t.data())})})})(window.jQuery,window);